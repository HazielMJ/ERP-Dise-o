<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>ERP de Logística</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4f9; margin: 0; }
    .menu { background: #2c3e50; position: sticky; top: 0; z-index: 1000; }
    .menu ul { list-style: none; margin: 0; padding: 0; }
    .menu ul li { float: left; position: relative; }
    .menu ul li a { display: block; color: white; padding: 14px 20px; text-decoration: none; }
    .menu ul li a:hover { background: #4d95ed; }
    .menu ul li ul { display: none; position: absolute; top: 100%; left: 0; background: #34495e; min-width: 200px; }
    .menu ul li:hover ul { display: block; }
    .menu::after { content: ""; clear: both; display: table; }
    section { padding: 30px; margin: 20px; background: white; border-radius: 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); }
    h2 { color: #2c3e50; }
    form { margin-top: 10px; }
    input, select, textarea, button { padding: 8px; margin: 5px 0; width: 100%; }
    table { border-collapse: collapse; width: 100%; margin-top: 10px; }
    table, th, td { border: 1px solid #ccc; }
    th, td { padding: 8px; text-align: center; }
    button { background: #4d95ed; color: white; border: none; cursor: pointer; font-weight: bold; margin: 2px; padding: 6px 10px; border-radius: 4px; }
    button:hover { background: #357ae8; }
    .submodulo { margin-top: 20px; padding: 20px; background: #f9f9f9; border: 1px solid #ddd; border-radius: 6px; display: none; }
  </style>
</head>
<body>

  <nav class="menu">
    <ul>
      <li><a href="#">ERP-Módulo de logística</a></li>
    </ul>
  </nav>

  <section id="inventarios">
    <h2>Gestión de Inventarios</h2>
    <form onsubmit="agregarFila(event,'tablaInventario',['prod','cant','ubi'])">
      <input type="text" id="prod" placeholder="Producto" required>
      <input type="number" id="cant" placeholder="Cantidad" required>
      <input type="text" id="ubi" placeholder="Ubicación" required>
      <button type="submit">Agregar</button>
    </form>
    <table id="tablaInventario"><tr><th>Producto</th><th>Cantidad</th><th>Ubicación</th><th>Acciones</th></tr></table>
  </section>

  <section id="compras">
    <h2>Compras y Abastecimiento</h2>
    <form onsubmit="agregarFila(event,'tablaCompras',['proveedor','productoCompra','cantidadCompra','precioCompra'],true)">
      <input type="text" id="proveedor" placeholder="Proveedor" required>
      <input type="text" id="productoCompra" placeholder="Producto" required>
      <input type="number" id="cantidadCompra" placeholder="Cantidad" required>
      <input type="number" id="precioCompra" placeholder="Precio Unitario" required>
      <button type="submit">Registrar</button>
    </form>
    <table id="tablaCompras"><tr><th>Proveedor</th><th>Producto</th><th>Cantidad</th><th>Total</th><th>Acciones</th></tr></table>
  </section>

  <section id="pedidos">
    <h2>Gestión de Pedidos y Ventas</h2>
    <form onsubmit="agregarFila(event,'tablaPedidos',['folio','cliente','productoPedido','cantidadPedido','precioPedido'],true)">
      <input type="text" id="folio" placeholder="Folio" required>
      <input type="text" id="cliente" placeholder="Cliente" required>
      <input type="text" id="productoPedido" placeholder="Producto" required>
      <input type="number" id="cantidadPedido" placeholder="Cantidad" required>
      <input type="number" id="precioPedido" placeholder="Precio Unitario" required>
      <button type="submit">Registrar</button>
    </form>
    <table id="tablaPedidos"><tr><th>Folio</th><th>Cliente</th><th>Producto</th><th>Cantidad</th><th>Total</th><th>Acciones</th></tr></table>
  </section>

  <section id="transporte">
    <h2>Transporte y Distribución</h2>
    <form onsubmit="agregarFila(event,'tablaRutas',['vehiculo','ruta','hora'])">
      <input type="text" id="vehiculo" placeholder="Vehículo" required>
      <input type="text" id="ruta" placeholder="Ruta" required>
      <input type="time" id="hora" required>
      <button type="submit">Agregar</button>
    </form>
    <table id="tablaRutas"><tr><th>Vehículo</th><th>Ruta</th><th>Hora</th><th>Acciones</th></tr></table>
  </section>

  <!-- Devoluciones igual que antes, pero les pondremos acciones -->
  <section id="devoluciones">
    <h2>Devoluciones y Logística Inversa</h2>
    <p>Submódulos:</p>
    <button onclick="mostrarSub('solicitud')">Solicitudes</button>
    <button onclick="mostrarSub('recepcion')">Recepción</button>
    <button onclick="mostrarSub('disposicion')">Disposición</button>
    <button onclick="mostrarSub('logistica')">Logística</button>
    <button onclick="mostrarSub('reembolsos')">Reembolsos</button>

    <div id="solicitud" class="submodulo">
      <h3>Gestión de Solicitudes</h3>
      <form onsubmit="agregarFila(event,'tablaSolicitudes',['clienteSolicitud','motivoSolicitud'])">
        <input type="text" id="clienteSolicitud" placeholder="Cliente" required>
        <input type="text" id="motivoSolicitud" placeholder="Motivo" required>
        <button type="submit">Registrar</button>
      </form>
      <table id="tablaSolicitudes"><tr><th>Cliente</th><th>Motivo</th><th>Acciones</th></tr></table>
    </div>

    <div id="recepcion" class="submodulo">
      <h3>Recepción y Validación</h3>
      <form onsubmit="agregarFila(event,'tablaRecepcion',['productoRecepcion','estadoRecepcion'])">
        <input type="text" id="productoRecepcion" placeholder="Producto" required>
        <select id="estadoRecepcion"><option>Nuevo</option><option>Usado</option><option>Defectuoso</option></select>
        <button type="submit">Validar</button>
      </form>
      <table id="tablaRecepcion"><tr><th>Producto</th><th>Estado</th><th>Acciones</th></tr></table>
    </div>

    <div id="disposicion" class="submodulo">
      <h3>Decisión de Disposición</h3>
      <form onsubmit="agregarFila(event,'tablaDisposicion',['productoDisposicion','accionDisposicion'])">
        <input type="text" id="productoDisposicion" placeholder="Producto" required>
        <select id="accionDisposicion"><option>Reincorporar</option><option>Reparar</option><option>Devolver a proveedor</option><option>Reciclar</option></select>
        <button type="submit">Guardar</button>
      </form>
      <table id="tablaDisposicion"><tr><th>Producto</th><th>Acción</th><th>Acciones</th></tr></table>
    </div>

    <div id="logistica" class="submodulo">
      <h3>Logística de Retorno</h3>
      <form onsubmit="agregarFila(event,'tablaLogistica',['transportista','fechaRetorno'])">
        <input type="text" id="transportista" placeholder="Transportista" required>
        <input type="date" id="fechaRetorno" required>
        <button type="submit">Generar</button>
      </form>
      <table id="tablaLogistica"><tr><th>Transportista</th><th>Fecha</th><th>Acciones</th></tr></table>
    </div>

    <div id="reembolsos" class="submodulo">
      <h3>Reembolsos y Cambios</h3>
      <form onsubmit="agregarFila(event,'tablaReembolsos',['clienteReembolso','tipoReembolso'])">
        <input type="text" id="clienteReembolso" placeholder="Cliente" required>
        <select id="tipoReembolso"><option>Reembolso</option><option>Cambio</option><option>Nota de crédito</option></select>
        <button type="submit">Procesar</button>
      </form>
      <table id="tablaReembolsos"><tr><th>Cliente</th><th>Tipo</th><th>Acciones</th></tr></table>
    </div>
  </section>

  <section id="reportes">
    <h2>Reportes y KPI</h2>
    <p>Aquí se pueden mostrar métricas resumidas.</p>
  </section>

<script>
  function mostrarSub(id) {
    document.querySelectorAll('.submodulo').forEach(div => div.style.display = 'none');
    document.getElementById(id).style.display = 'block';
  }

  // Función genérica para insertar filas
  function agregarFila(e, tablaId, campos, calcularTotal=false){
    e.preventDefault();
    let fila = "<tr>";
    let cantidad=0, precio=0;
    campos.forEach(campo=>{
      let valor=document.getElementById(campo).value;
      if(campo.toLowerCase().includes("cantidad")) cantidad=+valor;
      if(campo.toLowerCase().includes("precio")) precio=+valor;
      fila += `<td>${valor}</td>`;
    });
    if(calcularTotal){ 
      fila += `<td>${cantidad*precio}</td>`;
    }
    fila += `<td>
      <button onclick="editarFila(this)">Editar</button>
      <button onclick="eliminarFila(this)">Eliminar</button>
      <button onclick="entradaFila(this)">Entrada</button>
      <button onclick="salidaFila(this)">Salida</button>
    </td></tr>`;
    document.getElementById(tablaId).innerHTML += fila;
    e.target.reset();
  }

  function editarFila(btn){
    let fila=btn.parentNode.parentNode;
    let celdas=fila.querySelectorAll("td");
    alert("Edición rápida: cambia valores en las celdas y presiona Enter");
    celdas.forEach((c,i)=>{
      if(i<celdas.length-1){
        c.contentEditable=true;
        c.style.background="#ffffcc";
      }
    });
  }

  function eliminarFila(btn){
    btn.parentNode.parentNode.remove();
  }

  function entradaFila(btn){
    let fila=btn.parentNode.parentNode;
    let celdaCantidad = Array.from(fila.cells).find(c=>!isNaN(c.innerText) && c.innerText.trim()!="" );
    if(celdaCantidad){
      celdaCantidad.innerText= +celdaCantidad.innerText+1;
    }
  }

  function salidaFila(btn){
    let fila=btn.parentNode.parentNode;
    let celdaCantidad = Array.from(fila.cells).find(c=>!isNaN(c.innerText) && c.innerText.trim()!="" );
    if(celdaCantidad && +celdaCantidad.innerText>0){
      celdaCantidad.innerText= +celdaCantidad.innerText-1;
    }
  }
</script>
</body>
</html>